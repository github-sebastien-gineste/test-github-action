name: Ajouter un commentaire Ã  la Pull Request

on:
  pull_request:
    types: 
      - opened
      - edited

permissions:
  contents: 'read'
  issues: 'write'
  id-token: 'write'
  pull-requests: 'write'

jobs:
  add_comment:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout le code
      uses: actions/checkout@v3
    - name: Ajouter un commentaire en JS
      uses: actions/github-script@v6
      with: 
        github-token: ${{ secrets.GITHUB_TOKEN }}
        script: |
            const script = require('./.github/js/index.js')
            await script({github, context, core})
    - name: Ajouter un commentaire en GO
      uses: actions/setup-go@v4
      with:
         go-version: 'stable'
    - name: install dependacy
      run: |
        cd ./.github/go/ && go install -v github.com/google/go-github/github@latest
        cd ./.github/go/ && go install -v golang.org/x/oauth2@latest
    - name: "go run"
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        PR_NUMBER: ${{ github.event.number }}
        OWNER: ${{ github.event.repository.owner.login }}
        REPO: ${{ github.event.repository.name }}
      run: go run ./.github/go/hello.go


        
        